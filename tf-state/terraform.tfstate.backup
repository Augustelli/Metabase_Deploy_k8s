{
  "version": 4,
  "terraform_version": "1.7.3",
  "serial": 32,
  "lineage": "1667c67f-c44d-29e0-6d1f-019768f1f38c",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "openstack_compute_flavor_v2",
      "name": "small",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "disk": 20,
            "extra_specs": {},
            "flavor_id": "2d357d3d-32c1-4af8-81dd-a71a7d7cf303",
            "id": "2d357d3d-32c1-4af8-81dd-a71a7d7cf303",
            "is_public": true,
            "min_disk": null,
            "min_ram": null,
            "name": "m1.small",
            "ram": 2048,
            "region": null,
            "rx_tx_factor": 1,
            "swap": 0,
            "vcpus": 1
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "openstack_compute_flavor_v2",
      "name": "xl",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "disk": 160,
            "extra_specs": {},
            "flavor_id": "83a011d2-d2d8-4739-a969-0560469e0c4c",
            "id": "83a011d2-d2d8-4739-a969-0560469e0c4c",
            "is_public": true,
            "min_disk": null,
            "min_ram": null,
            "name": "m1.xlarge",
            "ram": 16384,
            "region": null,
            "rx_tx_factor": 1,
            "swap": 0,
            "vcpus": 8
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "openstack_images_image_v2",
      "name": "kube",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "checksum": "9e76b41abc09c3b57990dbee65519db6",
            "container_format": "bare",
            "created_at": "2024-03-06T14:04:51Z",
            "disk_format": "qcow2",
            "file": "/v2/images/f8b02ff3-7f01-4427-9626-c317fb7f847a/file",
            "hidden": false,
            "id": "f8b02ff3-7f01-4427-9626-c317fb7f847a",
            "member_status": null,
            "metadata": {},
            "min_disk_gb": 20,
            "min_ram_mb": 0,
            "most_recent": true,
            "name": "um-kube-tools",
            "name_regex": null,
            "owner": "3bbc97afbb294d159ff21a78605a06f9",
            "properties": {
              "base_image_ref": "e240efd9-b87e-4a91-bb9a-2eecb9ed51ca",
              "boot_roles": "member,reader,admin",
              "hw_machine_type": "pc",
              "image_location": "snapshot",
              "image_state": "available",
              "image_type": "image",
              "instance_uuid": "1a326509-7a18-4546-90fe-1a5e8285c466",
              "os_hash_algo": "sha512",
              "os_hash_value": "fefb33bd5a23380e592c25a64a399813a7a564b76e5930559967264456f7416d61c4fe13454aea33f64c2ebcf4e4fef1367e352c7cd27f31ed00c18dc1f0c82c",
              "owner_id": "3bbc97afbb294d159ff21a78605a06f9",
              "owner_project_name": "admin",
              "owner_user_name": "admin",
              "user_id": "8cd144aa3a7b427fbff32dbf72de6bde"
            },
            "protected": false,
            "region": "RegionOne",
            "schema": "/v2/schemas/image",
            "size_bytes": 2854420480,
            "size_max": null,
            "size_min": null,
            "sort": "name:asc",
            "tag": null,
            "tags": [],
            "updated_at": "2024-03-06T14:08:58Z",
            "visibility": "public"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "openstack_images_image_v2",
      "name": "ubuntu_2204",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "checksum": "ce68b63a0f25fb6ad172e251a7a16552",
            "container_format": "bare",
            "created_at": "2024-03-06T13:22:14Z",
            "disk_format": "qcow2",
            "file": "/v2/images/e240efd9-b87e-4a91-bb9a-2eecb9ed51ca/file",
            "hidden": false,
            "id": "e240efd9-b87e-4a91-bb9a-2eecb9ed51ca",
            "member_status": null,
            "metadata": {},
            "min_disk_gb": 0,
            "min_ram_mb": 0,
            "most_recent": true,
            "name": "ubuntu_2204",
            "name_regex": null,
            "owner": "3bbc97afbb294d159ff21a78605a06f9",
            "properties": {
              "os_hash_algo": "sha512",
              "os_hash_value": "68839d8394a586bc83429bbc7fb503c5424cce998a8b4722b0c41f2b400802ca580719f6f5857379fab87bf75f078e1b4febe6d07131c5457e7d140fc1a263e1"
            },
            "protected": false,
            "region": "RegionOne",
            "schema": "/v2/schemas/image",
            "size_bytes": 649003008,
            "size_max": null,
            "size_min": null,
            "sort": "name:asc",
            "tag": null,
            "tags": [],
            "updated_at": "2024-03-06T13:38:18Z",
            "visibility": "public"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "openstack_networking_network_v2",
      "name": "ext_net",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "admin_state_up": "true",
            "all_tags": [],
            "availability_zone_hints": [],
            "description": "",
            "dns_domain": "",
            "external": true,
            "id": "4cd100c4-1652-47b1-b63b-a69f96a06355",
            "matching_subnet_cidr": null,
            "mtu": 1500,
            "name": "ext_net",
            "network_id": null,
            "region": "RegionOne",
            "segments": [],
            "shared": "false",
            "status": null,
            "subnets": [
              "14c24d48-1fc6-4f61-ba48-8b4cc5c5b612",
              "9dd43736-509b-45fe-9cf3-636209072c5c",
              "a2f95ff7-d06a-487e-8f7b-29e711ece6af"
            ],
            "tags": null,
            "tenant_id": "3bbc97afbb294d159ff21a78605a06f9",
            "transparent_vlan": false
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_compute_floatingip_associate_v2",
      "name": "tf_bastion_fip",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fixed_ip": "",
            "floating_ip": "192.168.3.173",
            "id": "192.168.3.173/650d4e25-0aea-4d66-93d3-1611eb035a59/",
            "instance_id": "650d4e25-0aea-4d66-93d3-1611eb035a59",
            "region": "RegionOne",
            "timeouts": null,
            "wait_until_associated": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "data.openstack_compute_flavor_v2.small",
            "data.openstack_images_image_v2.ubuntu_2204",
            "openstack_compute_instance_v2.k8s_bastion",
            "openstack_compute_secgroup_v2.k8s_sg_bastion",
            "openstack_networking_floatingip_v2.bastion_fip",
            "openstack_networking_network_v2.k8s_net",
            "openstack_networking_subnet_v2.k8s_subnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_compute_instance_v2",
      "name": "k8s_bastion",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_ip_v4": "172.19.0.252",
            "access_ip_v6": "",
            "admin_pass": null,
            "all_metadata": {},
            "all_tags": [],
            "availability_zone": "nodos-amd-2022",
            "availability_zone_hints": null,
            "block_device": [],
            "config_drive": null,
            "created": "2024-07-18 02:20:24 +0000 UTC",
            "flavor_id": "2d357d3d-32c1-4af8-81dd-a71a7d7cf303",
            "flavor_name": "m1.small",
            "force_delete": false,
            "id": "650d4e25-0aea-4d66-93d3-1611eb035a59",
            "image_id": "e240efd9-b87e-4a91-bb9a-2eecb9ed51ca",
            "image_name": "ubuntu_2204",
            "key_pair": "UMCLOUD",
            "metadata": null,
            "name": "vm-bastion",
            "network": [
              {
                "access_network": false,
                "fixed_ip_v4": "172.19.0.252",
                "fixed_ip_v6": "",
                "mac": "fa:16:3e:26:bc:ff",
                "name": "k8s-net",
                "port": "",
                "uuid": "0dda3a05-d38c-4404-8010-db83f19ead3a"
              }
            ],
            "network_mode": null,
            "personality": [],
            "power_state": "active",
            "region": "RegionOne",
            "scheduler_hints": [],
            "security_groups": [
              "k8s_sg_bastion"
            ],
            "stop_before_destroy": false,
            "tags": null,
            "timeouts": null,
            "updated": "2024-07-18 02:20:35 +0000 UTC",
            "user_data": null,
            "vendor_options": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.openstack_compute_flavor_v2.small",
            "data.openstack_images_image_v2.ubuntu_2204",
            "openstack_compute_secgroup_v2.k8s_sg_bastion",
            "openstack_networking_network_v2.k8s_net",
            "openstack_networking_subnet_v2.k8s_subnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_compute_instance_v2",
      "name": "k8s_k8s",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_ip_v4": "172.19.0.83",
            "access_ip_v6": "",
            "admin_pass": null,
            "all_metadata": {},
            "all_tags": [],
            "availability_zone": "nodos-amd-2022",
            "availability_zone_hints": null,
            "block_device": [],
            "config_drive": null,
            "created": "2024-07-18 02:20:24 +0000 UTC",
            "flavor_id": "83a011d2-d2d8-4739-a969-0560469e0c4c",
            "flavor_name": "m1.xlarge",
            "force_delete": false,
            "id": "620604b9-cad4-444c-a44b-3341543b9352",
            "image_id": "f8b02ff3-7f01-4427-9626-c317fb7f847a",
            "image_name": "um-kube-tools",
            "key_pair": "UMCLOUD",
            "metadata": null,
            "name": "vm-k8s",
            "network": [
              {
                "access_network": false,
                "fixed_ip_v4": "172.19.0.83",
                "fixed_ip_v6": "",
                "mac": "fa:16:3e:5f:0e:09",
                "name": "k8s-net",
                "port": "",
                "uuid": "0dda3a05-d38c-4404-8010-db83f19ead3a"
              }
            ],
            "network_mode": null,
            "personality": [],
            "power_state": "active",
            "region": "RegionOne",
            "scheduler_hints": [],
            "security_groups": [
              "k8s_sg_k8s"
            ],
            "stop_before_destroy": false,
            "tags": null,
            "timeouts": null,
            "updated": "2024-07-18 02:20:33 +0000 UTC",
            "user_data": null,
            "vendor_options": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.openstack_compute_flavor_v2.xl",
            "data.openstack_images_image_v2.kube",
            "openstack_compute_secgroup_v2.k8s_sg_bastion",
            "openstack_compute_secgroup_v2.k8s_sg_k8s",
            "openstack_networking_network_v2.k8s_net",
            "openstack_networking_subnet_v2.k8s_subnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_compute_secgroup_v2",
      "name": "k8s_sg_bastion",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "k8s_sg_bastion",
            "id": "ddec922e-13c5-4f90-98d6-2610515a4dd7",
            "name": "k8s_sg_bastion",
            "region": "RegionOne",
            "rule": [
              {
                "cidr": "0.0.0.0/0",
                "from_group_id": "",
                "from_port": -1,
                "id": "29a2a1ec-240a-4de2-82ed-4a8194fdc3d2",
                "ip_protocol": "icmp",
                "self": false,
                "to_port": -1
              },
              {
                "cidr": "0.0.0.0/0",
                "from_group_id": "",
                "from_port": 22,
                "id": "966102b3-5295-441b-bb65-25213eb1c8ea",
                "ip_protocol": "tcp",
                "self": false,
                "to_port": 22
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_compute_secgroup_v2",
      "name": "k8s_sg_k8s",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "k8s_sg_k8s",
            "id": "84ed3bab-6239-4de9-816f-7a5763109a4b",
            "name": "k8s_sg_k8s",
            "region": "RegionOne",
            "rule": [
              {
                "cidr": "",
                "from_group_id": "ddec922e-13c5-4f90-98d6-2610515a4dd7",
                "from_port": -1,
                "id": "dd50f5e5-0243-461b-b507-9243a69914b0",
                "ip_protocol": "icmp",
                "self": false,
                "to_port": -1
              },
              {
                "cidr": "",
                "from_group_id": "ddec922e-13c5-4f90-98d6-2610515a4dd7",
                "from_port": 22,
                "id": "c1f73177-c810-4518-a319-a202e7166e1d",
                "ip_protocol": "tcp",
                "self": false,
                "to_port": 22
              },
              {
                "cidr": "0.0.0.0/0",
                "from_group_id": "",
                "from_port": 443,
                "id": "e19c82c2-48da-4a89-8c95-083f53ff766d",
                "ip_protocol": "tcp",
                "self": false,
                "to_port": 443
              },
              {
                "cidr": "0.0.0.0/0",
                "from_group_id": "",
                "from_port": 80,
                "id": "33c260c4-c8c4-4912-bccd-c9e0215b0c03",
                "ip_protocol": "tcp",
                "self": false,
                "to_port": 80
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "openstack_compute_secgroup_v2.k8s_sg_bastion"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_networking_floatingip_v2",
      "name": "bastion_fip",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": "192.168.3.173",
            "all_tags": [],
            "description": "bastion-ip",
            "dns_domain": "",
            "dns_name": "",
            "fixed_ip": "",
            "id": "a9a45515-0370-42a5-a285-dbf1427056ef",
            "pool": "ext_net",
            "port_id": "",
            "region": "RegionOne",
            "subnet_id": null,
            "subnet_ids": null,
            "tags": null,
            "tenant_id": "47be99fd5b414f559128203dc7c2a1e0",
            "timeouts": null,
            "value_specs": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_networking_network_v2",
      "name": "k8s_net",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "admin_state_up": true,
            "all_tags": [],
            "availability_zone_hints": [],
            "description": "",
            "dns_domain": "",
            "external": false,
            "id": "0dda3a05-d38c-4404-8010-db83f19ead3a",
            "mtu": 1450,
            "name": "k8s-net",
            "port_security_enabled": true,
            "qos_policy_id": "",
            "region": "RegionOne",
            "segments": [],
            "shared": false,
            "tags": null,
            "tenant_id": "47be99fd5b414f559128203dc7c2a1e0",
            "timeouts": null,
            "transparent_vlan": false,
            "value_specs": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_networking_router_interface_v2",
      "name": "k8s_router_iface_internal",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "force_destroy": false,
            "id": "c7ef4b45-df98-4567-a445-f49110e0f821",
            "port_id": "c7ef4b45-df98-4567-a445-f49110e0f821",
            "region": "RegionOne",
            "router_id": "a885e72c-30b8-4066-8b45-15fda863a782",
            "subnet_id": "5726e162-4ae1-40c6-8051-c77d41fd9f3c",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.openstack_networking_network_v2.ext_net",
            "openstack_networking_network_v2.k8s_net",
            "openstack_networking_router_v2.k8s_router",
            "openstack_networking_subnet_v2.k8s_subnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_networking_router_v2",
      "name": "k8s_router",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "admin_state_up": true,
            "all_tags": [],
            "availability_zone_hints": [],
            "description": "",
            "distributed": false,
            "enable_snat": true,
            "external_fixed_ip": [
              {
                "ip_address": "192.168.3.168",
                "subnet_id": "14c24d48-1fc6-4f61-ba48-8b4cc5c5b612"
              },
              {
                "ip_address": "2803:de40:4014:c6ff::119d",
                "subnet_id": "9dd43736-509b-45fe-9cf3-636209072c5c"
              }
            ],
            "external_network_id": "4cd100c4-1652-47b1-b63b-a69f96a06355",
            "external_subnet_ids": null,
            "id": "a885e72c-30b8-4066-8b45-15fda863a782",
            "name": "k8s-router",
            "region": "RegionOne",
            "tags": null,
            "tenant_id": "47be99fd5b414f559128203dc7c2a1e0",
            "timeouts": null,
            "value_specs": null,
            "vendor_options": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.openstack_networking_network_v2.ext_net"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "openstack_networking_subnet_v2",
      "name": "k8s_subnet",
      "provider": "provider[\"registry.opentofu.org/terraform-provider-openstack/openstack\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "all_tags": [],
            "allocation_pool": [
              {
                "end": "172.19.0.254",
                "start": "172.19.0.2"
              }
            ],
            "cidr": "172.19.0.0/24",
            "description": "",
            "dns_nameservers": [
              "8.8.8.8",
              "1.1.1.1"
            ],
            "enable_dhcp": true,
            "gateway_ip": "172.19.0.1",
            "id": "5726e162-4ae1-40c6-8051-c77d41fd9f3c",
            "ip_version": 4,
            "ipv6_address_mode": "",
            "ipv6_ra_mode": "",
            "name": "k8s-subnet",
            "network_id": "0dda3a05-d38c-4404-8010-db83f19ead3a",
            "no_gateway": false,
            "prefix_length": null,
            "region": "RegionOne",
            "service_types": [],
            "subnetpool_id": "",
            "tags": null,
            "tenant_id": "47be99fd5b414f559128203dc7c2a1e0",
            "timeouts": null,
            "value_specs": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "openstack_networking_network_v2.k8s_net"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
